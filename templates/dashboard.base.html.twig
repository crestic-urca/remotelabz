{% extends 'base.html.twig' %}

{% set breadcrumbs = breadcrumbs | default({}) %}

{% block header %}
<nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
  <div class="navbar-menu-wrapper d-flex align-items-center">
    <div class="navbar-brand-wrapper">
      <a class="navbar-brand" href="/"><img src="{{ asset('build/images/RemoteLabz_logo_white.png') }}" /></a>
    </div>
    <ul class="navbar-nav ml-lg-auto">
      {# <li class="nav-item lang-dropdown d-none d-sm-block">
        <a class="nav-link" href="#">
          <p class="mb-0">English <i class="flag-icon flag-icon-gb"></i></p>
        </a>
      </li> #}
      <li class="nav-item d-none d-sm-block profile-img dropdown">
        {# <div class="dropdown"> #}
          <a class="nav-link profile-image" href="#" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <img src="{{ asset(app.user.profilePicture) }}" alt="profile-img">
            {# <span class="online-status online bg-success"></span> #}
            {{ svg('arrow-down') }}
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink" style="position: absolute;transform: translate3d(0px, 34px, 0px);top: 0px;right: 0px;will-change: transform;">
            <h6 class="dropdown-header">{{ app.user.name }}</h6>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="{{ path('user_profile') }}">Settings</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="{{ path('logout') }}">Sign out</a>
          </div>
        {# </div> #}
      </li>
    </ul>
    <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center ml-auto" type="button" data-toggle="offcanvas">
      <span class="icon-menu icons"></span>
    </button>
  </div>
</nav>
{% endblock %}

{% block body %}
  <div class="page-body-wrapper">
    <!-- <div class="row row-offcanvas row-offcanvas-right"> -->
      <nav class="sidebar sidebar-offcanvas" id="sidebar">
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="{{ path('labs') }}">
                {{ svg('applications') }}
              <span class="menu-title">Labs</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ path('activities') }}">
                {{ svg('review-list') }}
              <span class="menu-title">Activities</span>
            </a>
          </li>
          {% if is_granted('ROLE_ADMINISTRATOR') %}
            <li class="nav-item">
              <a class="nav-link" href="{{ path('users') }}">
                {{ svg('users') }}
                <span class="menu-title">Users</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ path('flavors') }}">
                {{ svg('disk') }}
                <span class="menu-title">Flavors</span>
              </a>
            </li>
            {# <li class="nav-item">
              <a class="nav-link" href="{{ path('hypervisors') }}">
                <i class="menu-icon fa fa-building"></i>
                <span class="menu-title">Hypervisors</span>
              </a>
            </li> #}
            <li class="nav-item">
              <a class="nav-link" href="{{ path('courses') }}">
                  {{ svg('group') }}
                <span class="menu-title">Courses</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ path('network_settings') }}">
                  {{ svg('preferences') }}
                <span class="menu-title">Network settings</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ path('network_interfaces') }}">
                  {{ svg('issue-parent') }}
                <span class="menu-title">Network interfaces</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ path('operating_systems') }}">
                  {{ svg('package') }}
                <span class="menu-title">Operating systems</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ path('devices') }}">
                  {{ svg('monitor-o') }}
                <span class="menu-title">Devices</span>
              </a>
            </li>
            {# <li class="nav-item">
              <a class="nav-link" href="{{ path('connexions') }}">
                  {{ svg('podcast') }}
                <span class="menu-title">Connexions</span>
              </a>
            </li> #}
            <li class="nav-item">
              <a class="nav-link" href="{{ path('instances') }}">
                  {{ svg('terminal') }}
                <span class="menu-title">Instances</span>
              </a>
            </li>
          {% endif %}
          
        </ul>
      </nav>

      <div class="content-wrapper">
        
        {% block breadcrumbs %}
        <div class="container-fluid container-limited">
          <div class="breadcrumb">
            {% set breadcrumbs = breadcrumbs | merge({ 'Dashboard': path('index') }) %}
            {% for breadcrumb, link in breadcrumbs|reverse(true) %}
              <div class="breadcrumb-item">
                {%- if loop.last -%}<strong>{%- endif -%}
                {% if link is not null %}
                  <a href="{{ link }}">{{ breadcrumb }}</a>
                {% else %}
                  <span>{{ breadcrumb }}</span>
                {% endif %}
                
                
                {%- if loop.last -%}</strong>{%- endif -%}
              </div>
            {% endfor %}
          </div>
        </div>
      {% endblock %}
        <div class="container-fluid container-limited">
          <div class="row">
            <div class="flashbag-container col-lg-12 mt-2">
                {% for label, messages in app.flashes %}
                  {% for message in messages %}
                  <div class="flash-notice alert alert-{{ label }} alert-dismissible fade show">
                    <button aria-label="Close" class="close" data-dismiss="alert" type="dismiss">
                      <span aria-hidden="true">&times;</span>
                    </button>
                    {{ message }}
                  </div>
                  {% endfor %}
                {% endfor %}
            </div>
          </div>
          {% block wrapper %}
            
          {% endblock %}
        </div>
      </div>
    <!-- </div> -->
  </div>
  </div>
{% endblock %}

